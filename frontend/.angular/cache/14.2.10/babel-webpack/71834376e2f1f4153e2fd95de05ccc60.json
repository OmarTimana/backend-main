{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Acer/OneDrive/Documentos/Angular/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { compareAsc, format, parseISO, startOfToday } from \"date-fns\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/intermedium.service\";\nimport * as i3 from \"src/app/services/user.service\";\nimport * as i4 from \"src/app/services/reservas-admin.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@fullcalendar/angular\";\n\nfunction ReservasuserComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const espacio_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", espacio_r3.name, \" \");\n  }\n}\n\nfunction ReservasuserComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"label\", 19);\n    i0.ɵɵtext(3, \"Hora Inicial: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 20);\n    i0.ɵɵlistener(\"change\", function ReservasuserComponent_div_24_Template_select_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onHora($event));\n    });\n    i0.ɵɵelementStart(5, \"option\", 21);\n    i0.ɵɵtext(6, \"Selec Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 22);\n    i0.ɵɵtext(8, \"7:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 23);\n    i0.ɵɵtext(10, \"8:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 24);\n    i0.ɵɵtext(12, \"9:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 25);\n    i0.ɵɵtext(14, \"10:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\", 26);\n    i0.ɵɵtext(16, \"11:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"option\", 27);\n    i0.ɵɵtext(18, \"12:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"option\", 28);\n    i0.ɵɵtext(20, \"1:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"option\", 29);\n    i0.ɵɵtext(22, \"2:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"option\", 30);\n    i0.ɵɵtext(24, \"3:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"option\", 31);\n    i0.ɵɵtext(26, \"4:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"option\", 32);\n    i0.ɵɵtext(28, \"5:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"option\", 33);\n    i0.ɵɵtext(30, \"6:00PM\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"div\", 34)(32, \"label\", 35);\n    i0.ɵɵtext(33, \"Hora Final: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"select\", 36);\n    i0.ɵɵlistener(\"change\", function ReservasuserComponent_div_24_Template_select_change_34_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onHora1($event));\n    });\n    i0.ɵɵelementStart(35, \"option\", 21);\n    i0.ɵɵtext(36, \"Selec Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"option\", 24);\n    i0.ɵɵtext(38, \"9:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"option\", 25);\n    i0.ɵɵtext(40, \"10:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"option\", 26);\n    i0.ɵɵtext(42, \"11:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"option\", 27);\n    i0.ɵɵtext(44, \"12:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"option\", 28);\n    i0.ɵɵtext(46, \"1:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"option\", 29);\n    i0.ɵɵtext(48, \"2:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"option\", 30);\n    i0.ɵɵtext(50, \"3:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"option\", 31);\n    i0.ɵɵtext(52, \"4:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"option\", 32);\n    i0.ɵɵtext(54, \"5:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"option\", 33);\n    i0.ɵɵtext(56, \"6:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"option\", 37);\n    i0.ɵɵtext(58, \"7:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"option\", 38);\n    i0.ɵɵtext(60, \"8:00PM\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction ReservasuserComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"label\", 19);\n    i0.ɵɵtext(3, \"Hora Inicial: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 20);\n    i0.ɵɵlistener(\"change\", function ReservasuserComponent_div_25_Template_select_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onHora($event));\n    });\n    i0.ɵɵelementStart(5, \"option\", 21);\n    i0.ɵɵtext(6, \"Selec Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 22);\n    i0.ɵɵtext(8, \"7:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 23);\n    i0.ɵɵtext(10, \"8:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 24);\n    i0.ɵɵtext(12, \"9:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 25);\n    i0.ɵɵtext(14, \"10:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\", 26);\n    i0.ɵɵtext(16, \"11:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"option\", 27);\n    i0.ɵɵtext(18, \"12:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"option\", 28);\n    i0.ɵɵtext(20, \"1:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"option\", 29);\n    i0.ɵɵtext(22, \"2:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"option\", 30);\n    i0.ɵɵtext(24, \"3:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"option\", 31);\n    i0.ɵɵtext(26, \"4:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"option\", 32);\n    i0.ɵɵtext(28, \"5:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"option\", 33);\n    i0.ɵɵtext(30, \"6:00PM\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"div\", 34)(32, \"label\", 35);\n    i0.ɵɵtext(33, \"Hora Final: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"select\", 36);\n    i0.ɵɵlistener(\"change\", function ReservasuserComponent_div_25_Template_select_change_34_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onHora1($event));\n    });\n    i0.ɵɵelementStart(35, \"option\", 21);\n    i0.ɵɵtext(36, \"Selec Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"option\", 23);\n    i0.ɵɵtext(38, \"8:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"option\", 24);\n    i0.ɵɵtext(40, \"9:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"option\", 25);\n    i0.ɵɵtext(42, \"10:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"option\", 26);\n    i0.ɵɵtext(44, \"11:00AM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"option\", 27);\n    i0.ɵɵtext(46, \"12:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"option\", 28);\n    i0.ɵɵtext(48, \"1:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"option\", 29);\n    i0.ɵɵtext(50, \"2:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"option\", 30);\n    i0.ɵɵtext(52, \"3:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"option\", 31);\n    i0.ɵɵtext(54, \"4:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"option\", 32);\n    i0.ɵɵtext(56, \"5:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"option\", 33);\n    i0.ɵɵtext(58, \"6:00PM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"option\", 37);\n    i0.ɵɵtext(60, \"7:00PM\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nexport class ReservasuserComponent {\n  constructor(authservice, intmserver, ususer, reserserv) {\n    this.authservice = authservice;\n    this.intmserver = intmserver;\n    this.ususer = ususer;\n    this.reserserv = reserserv; // ------------------------------------------------- Date fns ---------------------------------------------------- //\n    // llegaInicio = document.getElementById(\"from\").value;\n\n    this.today = format(startOfToday(), 'yyyy-MM-dd'); // -------------------------------------------------------------------------------------------------------- //\n    // -------------------------------------------------- Calendar Options ---------------------------------------------- //\n\n    this.calendarOptions = {\n      initialView: 'dayGridMonth',\n      dateClick: this.handleDateClick.bind(this),\n      hiddenDays: [0]\n    };\n    this.espacios = [{\n      name: \"Auditorio\",\n      value: 1\n    }, {\n      name: \"Sala de VideoConferencias 1\",\n      value: 2\n    }, {\n      name: \"Sala de VideoConferencias 2\",\n      value: 3\n    }];\n    this.opcionSeleccionado = '0';\n    this.verSeleccion = ''; // ------------------------------------------------------------------------------------------------------------- //\n    //------------------------------------------Envio de Reserva---------------------------------------------------- //\n\n    this.reserv = {\n      fini: '',\n      fend: '',\n      namevent: '',\n      user: this.ususer.getuser(),\n      sitio: 'Sala de VideoConferencias 1',\n      state: '',\n      anexo: ''\n    };\n    this.FileSelected = false;\n  }\n\n  onHora(e) {\n    this.start = this.today + \" \" + e.target.value;\n  }\n\n  onHora1(e) {\n    this.end = this.today + \" \" + e.target.value;\n  }\n\n  handleDateClick(arg) {\n    this.convert = parseISO(arg.dateStr);\n    this.convert2 = startOfToday();\n\n    if (compareAsc(this.convert, this.convert2) === 1 || compareAsc(this.convert, this.convert2) === 0) {\n      this.today = arg.dateStr;\n    } else {\n      alert(\"Fecha Incorrecta, No se puede agendar para fechas pasadas\");\n    }\n  }\n\n  capturar() {\n    // Pasamos el valor seleccionado a la variable verSeleccion\n    this.verSeleccion = this.opcionSeleccionado;\n  }\n\n  ngOnInit() {\n    this.FileSelected = false;\n  }\n\n  selectFile($e) {\n    this.FileSelected = true;\n\n    if (this.FileSelected) {\n      console.log(\"seleccionado\");\n    }\n\n    const [file] = $e.target.files;\n    this.filetmp = {\n      fileraw: file,\n      filename: file.name\n    };\n  }\n\n  Request() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.intmserver.esUser()) {\n        _this.reserv.sitio = _this.opcionSeleccionado;\n        _this.reserv.fini = _this.start;\n        _this.reserv.fend = _this.end;\n        _this.reserv.user = _this.ususer.getuser();\n        _this.reserv.state = 'solicitado';\n        yield (yield _this.reserserv.solReserva(_this.reserv)).subscribe( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (res) {\n            console.log(res);\n\n            if (_this.FileSelected) {\n              const body = new FormData();\n              body.append('file', _this.filetmp.fileraw, _this.filetmp.filename);\n              body.append('res', res._id);\n              (yield _this.reserserv.saveFile(body)).subscribe(res => console.log(res));\n            } else {\n              console.log(\"sin file\");\n            }\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }\n    })();\n  }\n\n}\n\nReservasuserComponent.ɵfac = function ReservasuserComponent_Factory(t) {\n  return new (t || ReservasuserComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.IntermediumService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ReservasAdminService));\n};\n\nReservasuserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReservasuserComponent,\n  selectors: [[\"app-reservasuser\"]],\n  decls: 33,\n  vars: 8,\n  consts: [[1, \"d-inline\"], [1, \"all\"], [1, \"container\"], [1, \"\", 3, \"options\"], [1, \"card\", \"text-left\"], [1, \"card-header\", \"text-center\"], [1, \"card-body\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"name\", \"nombre\", \"id\", \"nombre\", 1, \"ml-2\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"\", 1, \"mt-4\"], [1, \"ml-2\", \"mb-4\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"0\", \"selected\", \"\", \"disabled\", \"\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [\"for\", \"file\", 1, \"mt-4\"], [\"type\", \"file\", \"name\", \"file\", \"id\", \"file\", 1, \"ml-2\", 3, \"change\"], [1, \"card-footer\", \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"for\", \"from\"], [\"name\", \"from\", \"id\", \"from\", 3, \"change\"], [\"value\", \"not\", \"selected\", \"\", \"disabled\", \"\"], [\"value\", \"7:00\"], [\"value\", \"8:00\"], [\"value\", \"9:00\"], [\"value\", \"10:00\"], [\"value\", \"11:00\"], [\"value\", \"12:00\"], [\"value\", \"13:00\"], [\"value\", \"14:00\"], [\"value\", \"15:00\"], [\"value\", \"16:00\"], [\"value\", \"17:00\"], [\"value\", \"18:00\"], [1, \"d-inline\", \"ml-3\"], [\"for\", \"to\"], [\"name\", \"to\", \"id\", \"to\", 3, \"change\"], [\"value\", \"19:00\"], [\"value\", \"20:00\"]],\n  template: function ReservasuserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"SOLICITAR ESPACIO F\\u00CDSICO\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵtext(3, \" fecha seleccionada: \");\n      i0.ɵɵelementStart(4, \"h4\", 0);\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 1)(7, \"div\", 2);\n      i0.ɵɵelement(8, \"full-calendar\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5);\n      i0.ɵɵtext(11, \" Reserva \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 6)(13, \"div\")(14, \"label\", 7);\n      i0.ɵɵtext(15, \"Nombre del Evento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.reserv.namevent = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"label\", 9);\n      i0.ɵɵtext(18, \"Espacio Fisico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"select\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_select_ngModelChange_19_listener($event) {\n        return ctx.opcionSeleccionado = $event;\n      })(\"change\", function ReservasuserComponent_Template_select_change_19_listener() {\n        return ctx.capturar();\n      });\n      i0.ɵɵelementStart(20, \"option\", 11);\n      i0.ɵɵtext(21, \"Selecciona un Espacio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, ReservasuserComponent_option_22_Template, 2, 1, \"option\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 13);\n      i0.ɵɵtemplate(24, ReservasuserComponent_div_24_Template, 61, 0, \"div\", 14);\n      i0.ɵɵtemplate(25, ReservasuserComponent_div_25_Template, 61, 0, \"div\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\")(27, \"label\", 15);\n      i0.ɵɵtext(28, \"Anexos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"input\", 16);\n      i0.ɵɵlistener(\"change\", function ReservasuserComponent_Template_input_change_29_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"div\", 17)(31, \"button\", 18);\n      i0.ɵɵtext(32, \"Reservar\");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.today);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"options\", ctx.calendarOptions);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.reserv.namevent);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.opcionSeleccionado);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.espacios);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"ngSwitch\", ctx.opcionSeleccionado);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", \"Auditorio\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", \"Sala de VideoConferencias 1\");\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgSwitch, i5.NgSwitchCase, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel, i7.FullCalendarComponent],\n  styles: [\".all[_ngcontent-%COMP%]{\\r\\n    margin-top: 20px;\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.container[_ngcontent-%COMP%]{\\r\\n    margin-left: -15px;\\r\\n    width: 515px;\\r\\n}\\r\\n\\r\\n.row[_ngcontent-%COMP%]{\\r\\n    display: inline-table;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc2VydmFzdXNlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLGdCQUFnQjtJQUNoQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxxQkFBcUI7QUFDekIiLCJmaWxlIjoicmVzZXJ2YXN1c2VyLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLmFsbHtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG59XHJcblxyXG4uY29udGFpbmVye1xyXG4gICAgbWFyZ2luLWxlZnQ6IC0xNXB4O1xyXG4gICAgd2lkdGg6IDUxNXB4O1xyXG59XHJcblxyXG4ucm93e1xyXG4gICAgZGlzcGxheTogaW5saW5lLXRhYmxlO1xyXG59XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["compareAsc","format","parseISO","startOfToday","i0","ReservasuserComponent","constructor","authservice","intmserver","ususer","reserserv","initialView","dateClick","handleDateClick","bind","hiddenDays","name","value","fini","fend","namevent","user","getuser","sitio","state","anexo","onHora","e","start","today","target","onHora1","end","arg","convert","dateStr","convert2","alert","capturar","verSeleccion","opcionSeleccionado","ngOnInit","FileSelected","selectFile","$e","console","log","file","files","filetmp","fileraw","filename","Request","esUser","reserv","solReserva","subscribe","res","body","FormData","append","_id","saveFile","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reservasuser\\reservasuser.component.ts","C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reservasuser\\reservasuser.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CalendarOptions } from '@fullcalendar/angular';\nimport { compareAsc, compareDesc, format, parse, parseISO, startOfToday } from \"date-fns\";\nimport { AuthService } from 'src/app/services/auth.service';\nimport { IntermediumService } from 'src/app/services/intermedium.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { ReservasAdminService } from 'src/app/services/reservas-admin.service';\nimport { Observable } from 'rxjs';\n\n\n@Component({\n  selector: 'app-reservasuser',\n  templateUrl: './reservasuser.component.html',\n  styleUrls: ['./reservasuser.component.css']\n})\nexport class ReservasuserComponent implements OnInit{\n\n// ------------------------------------------------- Date fns ---------------------------------------------------- //\n\n// llegaInicio = document.getElementById(\"from\").value;\n\n\ntoday = format(startOfToday(), 'yyyy-MM-dd');\nstart: any;\nend: any;\nconvert: any;\nconvert2: any;\n\nonHora(e: any){\n  this.start = this.today+\" \"+e.target.value\n}\n\nonHora1(e: any){\n  this.end = this.today+\" \"+e.target.value\n}\n\n\n// -------------------------------------------------------------------------------------------------------- //\n\n\n// -------------------------------------------------- Calendar Options ---------------------------------------------- //\n  calendarOptions: CalendarOptions = {\n    initialView: 'dayGridMonth', // bind is important!\n    dateClick: this.handleDateClick.bind(this),\n    \n    hiddenDays: [0]\n\n  };\n\n  handleDateClick(arg: any) {\n    this.convert = parseISO(arg.dateStr)\n    this.convert2 = startOfToday()\n    if(compareAsc(this.convert, this.convert2) === 1 || compareAsc(this.convert, this.convert2) === 0 ){\n      this.today = arg.dateStr\n    }else{ alert(\"Fecha Incorrecta, No se puede agendar para fechas pasadas\")}\n    \n  };\n\n  espacios: any = [\n    {name: \"Auditorio\", value: 1},{name: \"Sala de VideoConferencias 1\", value: 2}, {name: \"Sala de VideoConferencias 2\", value: 3}\n  ];\n \n\n  opcionSeleccionado: any  = '0';\n  verSeleccion: any        = '';\n\n  capturar() {\n    // Pasamos el valor seleccionado a la variable verSeleccion\n    this.verSeleccion = this.opcionSeleccionado;\n\n  };\n\n// ------------------------------------------------------------------------------------------------------------- //\n\n//------------------------------------------Envio de Reserva---------------------------------------------------- //\n\n  reserv={\n    fini:'',\n    fend:'',   \n    namevent:'',\n    user:this.ususer.getuser(),\n    sitio:'Sala de VideoConferencias 1',\n    state:'',\n    anexo:''\n  }\n\n  filetmp:any\n  FileSelected:boolean=false\n\n  constructor(public authservice:AuthService,\n    public intmserver:IntermediumService,\n    public ususer:UserService,\n    public reserserv:ReservasAdminService\n  ) {}\n\n  ngOnInit(): void {\n    this.FileSelected=false\n  }\n\n  selectFile($e: any): void {\n    this.FileSelected=true\n    if (this.FileSelected) {\n      console.log(\"seleccionado\");\n    }\n    const [file] = $e.target.files\n    this.filetmp={\n      fileraw:file,\n      filename:file.name\n    }\n  }\n\n  async Request(){\n    if(this.intmserver.esUser()){\n      this.reserv.sitio=this.opcionSeleccionado\n      this.reserv.fini=this.start\n      this.reserv.fend=this.end\n      this.reserv.user=this.ususer.getuser()\n      this.reserv.state='solicitado'\n      await (await this.reserserv.solReserva(this.reserv)).subscribe(async(res)=>{\n        console.log(res);\n        if (this.FileSelected) {\n          const body=new FormData()\n          body.append('file',this.filetmp.fileraw, this.filetmp.filename);\n          body.append('res',res._id);\n          (await this.reserserv.saveFile(body)).subscribe(res=>console.log(res))\n        }else{\n          console.log(\"sin file\");\n        }\n      })\n    }\n  }\n}\n","<h1>SOLICITAR ESPACIO FÍSICO</h1>\n\n<div> fecha seleccionada: <h4 class=\"d-inline\">{{today}}</h4> </div>\n\n<div class=\"all\">\n  <div class=\"container\">\n    <full-calendar class=\"\" [options]=\"calendarOptions\"></full-calendar>\n  </div>\n    <!-- <form (submit)=\"Request()\" enctype=\"multipart/form-data\"> -->\n        <div class=\"card text-left\">\n            <div class=\"card-header text-center\">\n                Reserva\n            </div>\n\n            <div class=\"card-body\">\n                <div>\n                    <label for=\"nombre\">Nombre del Evento</label>\n                    <input class=\"ml-2 mb-3\" type=\"text\" name=\"nombre\" id=\"nombre\" [(ngModel)]=\"reserv.namevent\">\n                </div>\n\n                <label for=\"\" class=\"mt-4\">Espacio Fisico</label>\n                <select class=\"ml-2 mb-4\" [(ngModel)]=\"opcionSeleccionado\" (change)=\"capturar()\">\n                    <option value=\"0\" selected disabled>Selecciona un Espacio</option>\n                    <option *ngFor=\"let espacio of espacios\">\n                    {{espacio.name}}\n                    </option>\n                </select>\n\n                <div ngSwitch=\"{{opcionSeleccionado}}\">\n\n                    <div *ngSwitchCase=\"'Auditorio'\">\n                        <div class=\"d-inline\" >\n\n                            <label for=\"from\">Hora Inicial: </label>\n                            <select name=\"from\" id=\"from\" (change)=\"onHora($event)\">\n                                <option value=\"not\" selected disabled>Selec Hora</option>\n                                <option value=\"7:00\">7:00AM</option>\n                                <option value=\"8:00\">8:00AM</option>\n                                <option value=\"9:00\">9:00AM</option>\n                                <option value=\"10:00\">10:00AM</option>\n                                <option value=\"11:00\">11:00AM</option>\n                                <option value=\"12:00\">12:00PM</option>\n                                <option value=\"13:00\">1:00PM</option>\n                                <option value=\"14:00\">2:00PM</option>\n                                <option value=\"15:00\">3:00PM</option>\n                                <option value=\"16:00\">4:00PM</option>\n                                <option value=\"17:00\">5:00PM</option>\n                                <option value=\"18:00\">6:00PM</option>\n                            </select>\n                        </div>\n\n                        <div class=\"d-inline ml-3\">\n\n                            <label for=\"to\">Hora Final: </label>\n                            <select name=\"to\" id=\"to\" (change)=\"onHora1($event)\">\n                                <option value=\"not\" selected disabled>Selec Hora</option>\n                                <option value=\"9:00\">9:00AM</option>\n                                <option value=\"10:00\">10:00AM</option>\n                                <option value=\"11:00\">11:00AM</option>\n                                <option value=\"12:00\">12:00PM</option>\n                                <option value=\"13:00\">1:00PM</option>\n                                <option value=\"14:00\">2:00PM</option>\n                                <option value=\"15:00\">3:00PM</option>\n                                <option value=\"16:00\">4:00PM</option>\n                                <option value=\"17:00\">5:00PM</option>\n                                <option value=\"18:00\">6:00PM</option>\n                                <option value=\"19:00\">7:00PM</option>\n                                <option value=\"20:00\">8:00PM</option>\n                            </select>\n                        </div>\n                            \n                    </div>\n\n                    <div *ngSwitchCase=\"'Sala de VideoConferencias 1'\">\n                        <div class=\"d-inline\" >\n\n                            <label for=\"from\">Hora Inicial: </label>\n                            <select name=\"from\" id=\"from\" (change)=\"onHora($event)\">\n                                <option value=\"not\" selected disabled>Selec Hora</option>\n                                <option value=\"7:00\">7:00AM</option>\n                                <option value=\"8:00\">8:00AM</option>\n                                <option value=\"9:00\">9:00AM</option>\n                                <option value=\"10:00\">10:00AM</option>\n                                <option value=\"11:00\">11:00AM</option>\n                                <option value=\"12:00\">12:00PM</option>\n                                <option value=\"13:00\">1:00PM</option>\n                                <option value=\"14:00\">2:00PM</option>\n                                <option value=\"15:00\">3:00PM</option>\n                                <option value=\"16:00\">4:00PM</option>\n                                <option value=\"17:00\">5:00PM</option>\n                                <option value=\"18:00\">6:00PM</option>\n                            </select>\n                        </div>\n\n                        <div class=\"d-inline ml-3\">\n\n                            <label for=\"to\">Hora Final: </label>\n                            <select name=\"to\" id=\"to\" (change)=\"onHora1($event)\">\n                                <option value=\"not\" selected disabled>Selec Hora</option>\n                                <option value=\"8:00\">8:00AM</option>\n                                <option value=\"9:00\">9:00AM</option>\n                                <option value=\"10:00\">10:00AM</option>\n                                <option value=\"11:00\">11:00AM</option>\n                                <option value=\"12:00\">12:00PM</option>\n                                <option value=\"13:00\">1:00PM</option>\n                                <option value=\"14:00\">2:00PM</option>\n                                <option value=\"15:00\">3:00PM</option>\n                                <option value=\"16:00\">4:00PM</option>\n                                <option value=\"17:00\">5:00PM</option>\n                                <option value=\"18:00\">6:00PM</option>\n                                <option value=\"19:00\">7:00PM</option>\n                            </select>   \n                        </div>\n                    </div>\n                </div>\n\n                <div>\n                    <label for=\"file\" class=\"mt-4\">Anexos</label>\n                    <input type=\"file\" name=\"file\" id=\"file\" class=\"ml-2\" (change)=\"selectFile($event)\">\n                </div>\n\n            </div>\n\n            <div class=\"card-footer text-center\">\n                <button type=\"submit\" class=\"btn btn-primary\">Reservar</button>\n            </div>\n\n        </div>\n    <!-- </form> -->\n</div>"]},"metadata":{},"sourceType":"module"}