{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Acer/OneDrive/Documentos/Angular/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/intermedium.service\";\nimport * as i3 from \"src/app/services/user.service\";\nimport * as i4 from \"src/app/services/reservas-admin.service\";\nimport * as i5 from \"@angular/forms\";\nexport class ReservasuserComponent {\n  constructor(authservice, intmserver, ususer, reserserv) {\n    this.authservice = authservice;\n    this.intmserver = intmserver;\n    this.ususer = ususer;\n    this.reserserv = reserserv;\n    this.reserv = {\n      fini: '',\n      fend: '',\n      namevent: '',\n      user: this.ususer.getuser(),\n      depend: '',\n      sitio: 'Sala de VideoConferencias 1',\n      state: '',\n      anexo: FileList.prototype[0]\n    };\n    this.progress = 0;\n    this.message = '';\n  }\n\n  ngOnInit() {\n    this.fileInfos = this.reserserv.getFiles();\n  }\n\n  Request() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.upload(); // if(this.intmserver.esUser()){\n      //   this.reserv.user=this.ususer.getuser()\n      //   this.reserv.state='solicitado'\n      //   await this.reserserv.solReserva(this.reserv)\n      // }\n\n    })();\n  }\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n\n  upload() {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n        this.reserserv.upload(this.currentFile).subscribe({\n          next: event => {\n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round(100 * event.loaded / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              this.fileInfos = this.reserserv.getFiles();\n            }\n          },\n          error: err => {\n            console.log(err);\n            this.progress = 0;\n\n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n\n            this.currentFile = undefined;\n          }\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n\n}\n\nReservasuserComponent.ɵfac = function ReservasuserComponent_Factory(t) {\n  return new (t || ReservasuserComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.IntermediumService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ReservasAdminService));\n};\n\nReservasuserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReservasuserComponent,\n  selectors: [[\"app-reservasuser\"]],\n  decls: 38,\n  vars: 4,\n  consts: [[1, \"continer\"], [1, \"row\"], [1, \"col-md-8\", \"mx-auto\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [\"action\", \"http://localhost:3000/api/reservas/upload\", \"method\", \"post\", \"enctype\", \"multipart/form-data\"], [1, \"form-group\"], [\"type\", \"time\", \"name\", \"fini\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"time\", \"name\", \"fend\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"event\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"sit\", \"id\", \"sit\", \"required\", \"se requiere\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\", \"selected\", \"\"], [\"value\", \"Sala de VideoConferencias 1\"], [\"value\", \"Sala de VideoConferencias 2\"], [\"value\", \"Auditorio\"], [\"for\", \"formFile\", 1, \"form-label\"], [\"type\", \"file\", \"name\", \"file\", \"id\", \"file\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n  template: function ReservasuserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n      i0.ɵɵtext(5, \" Solicitar Reserva \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"form\", 6)(8, \"div\", 7)(9, \"label\");\n      i0.ɵɵtext(10, \"Fecha INIcial\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.reserv.fini = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 7)(13, \"label\");\n      i0.ɵɵtext(14, \"Fecha de terminacion\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.reserv.fend = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 7)(17, \"label\");\n      i0.ɵɵtext(18, \"NOMBRE DE EVENTO\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.reserv.namevent = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(20, \"P\");\n      i0.ɵɵtext(21, \" SITIO \");\n      i0.ɵɵelementStart(22, \"select\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function ReservasuserComponent_Template_select_ngModelChange_22_listener($event) {\n        return ctx.reserv.sitio = $event;\n      });\n      i0.ɵɵelementStart(23, \"option\", 12);\n      i0.ɵɵtext(24, \"--- Seleccione ---\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"option\", 13);\n      i0.ɵɵtext(26, \"Sala de VideoConferencias 1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"option\", 14);\n      i0.ɵɵtext(28, \"Sala de VideoConferencias 2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"option\", 15);\n      i0.ɵɵtext(30, \"Auditorio\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(31, \"p\");\n      i0.ɵɵelementStart(32, \"label\", 16);\n      i0.ɵɵtext(33, \"Anexo opcional (cedula, certificados de eventos, etc)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"input\", 17)(35, \"p\");\n      i0.ɵɵelementStart(36, \"button\", 18);\n      i0.ɵɵtext(37, \" Enviar \");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.reserv.fini);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.reserv.fend);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.reserv.namevent);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.reserv.sitio);\n    }\n  },\n  dependencies: [i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZXNlcnZhc3VzZXIuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpEventType","HttpResponse","ReservasuserComponent","constructor","authservice","intmserver","ususer","reserserv","fini","fend","namevent","user","getuser","depend","sitio","state","anexo","FileList","prototype","ngOnInit","fileInfos","getFiles","Request","upload","selectFile","event","selectedFiles","target","files","progress","file","item","currentFile","subscribe","next","type","UploadProgress","Math","round","loaded","total","message","body","error","err","console","log","undefined","i0","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reservasuser\\reservasuser.component.ts","C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reservasuser\\reservasuser.component.html"],"sourcesContent":["import { Component, OnInit, Type } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { IntermediumService } from 'src/app/services/intermedium.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { ReservasAdminService } from 'src/app/services/reservas-admin.service';\nimport { Observable } from 'rxjs';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\n\n@Component({\n  selector: 'app-reservasuser',\n  templateUrl: './reservasuser.component.html',\n  styleUrls: ['./reservasuser.component.css']\n})\nexport class ReservasuserComponent implements OnInit {\n\n  reserv={\n    fini:'',\n    fend:'',   \n    namevent:'',\n    user:this.ususer.getuser(), \n    depend: '',\n    sitio:'Sala de VideoConferencias 1',\n    state:'',\n    anexo:FileList.prototype[0]\n  }\n\n  constructor(public authservice:AuthService,\n    public intmserver:IntermediumService,\n    public ususer:UserService,\n    public reserserv:ReservasAdminService\n    ) {}\n\n  ngOnInit(): void {\n    this.fileInfos = this.reserserv.getFiles();\n  }\n\n  async Request(){\n    this.upload()\n    // if(this.intmserver.esUser()){\n    //   this.reserv.user=this.ususer.getuser()\n    //   this.reserv.state='solicitado'\n    //   await this.reserserv.solReserva(this.reserv)\n    // }\n  }\n\n  selectedFiles?: FileList;\n  currentFile?: File;\n  progress = 0;\n  message = '';\n\n  fileInfos?: Observable<any>;\n\n  selectFile(event: any): void {\n    this.selectedFiles = event.target.files;\n  }\n\n  upload(): void {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file: File | null = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n        \n        this.reserserv.upload(this.currentFile).subscribe({\n          next: (event: any) => {\n            \n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round(100 * event.loaded / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              this.fileInfos = this.reserserv.getFiles();\n            }\n          },\n          error: (err: any) => {\n            console.log(err);\n            this.progress = 0;\n\n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n\n            this.currentFile = undefined;\n          }\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n  \n}\n","<div class=\"continer\">\n    <div class=\"row\">\n        <div class=\"col-md-8 mx-auto\">\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    Solicitar Reserva\n                </div>\n                <div class=\"card-body\">\n                    <form action=\"http://localhost:3000/api/reservas/upload\" method=\"post\" enctype=\"multipart/form-data\">\n                        <div class=\"form-group\">\n                            <label>Fecha INIcial</label>\n                            <input type=\"time\" name=\"fini\" required [(ngModel)]=\"reserv.fini\">\n                        </div>\n                        <div class=\"form-group\">\n                            <label>Fecha de terminacion</label>\n                            <input type=\"time\" name=\"fend\" required [(ngModel)]=\"reserv.fend\">\n                        </div>\n                        <div class=\"form-group\">\n                            <label>NOMBRE DE EVENTO</label>\n                            <input type=\"text\" name='event' required [(ngModel)]=\"reserv.namevent\">\n                        </div>\n                        <P></P> SITIO\n                        <select name=\"sit\" id=\"sit\" class=\"form-control\" [(ngModel)]=\"reserv.sitio\" required=\"se requiere\">\n                            <option value=\"\" selected>--- Seleccione ---</option>\n                            <option value=\"Sala de VideoConferencias 1\">Sala de VideoConferencias 1</option>\n                            <option value=\"Sala de VideoConferencias 2\">Sala de VideoConferencias 2</option>\n                            <option value=\"Auditorio\">Auditorio</option>\n\n                        </select> <p></p>\n                        <label for=\"formFile\" class=\"form-label\">Anexo opcional (cedula, certificados de eventos, etc)</label>\n                        <input type=\"file\" name='file' id=\"file\" class=\"form-control\">\n                        <p></p>\n                        <button class=\"btn btn-primary\" type=\"submit\"> Enviar </button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module"}