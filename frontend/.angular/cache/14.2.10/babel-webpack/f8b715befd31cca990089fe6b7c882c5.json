{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Acer/OneDrive/Documentos/Angular/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/reservas-admin.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ReportesComponent_div_3_th_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"th\", 9);\n    i0.ɵɵlistener(\"click\", function ReportesComponent_div_3_th_44_Template_th_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const r_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.Down(r_r1.anexo));\n    });\n    i0.ɵɵelementStart(1, \"button\", 13);\n    i0.ɵɵtext(2, \"Descargar\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ReportesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"label\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"div\")(6, \"label\", 6);\n    i0.ɵɵtext(7, \"USUARIO\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 6);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\")(15, \"label\", 6);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\")(18, \"label\", 6);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"label\", 6);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"hr\");\n    i0.ɵɵelementStart(23, \"div\")(24, \"label\", 6);\n    i0.ɵɵtext(25, \"RESERVA\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\")(27, \"label\", 6);\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\")(30, \"label\", 6);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\")(33, \"label\", 6);\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\")(36, \"label\", 6);\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(38, \"hr\");\n    i0.ɵɵelementStart(39, \"div\")(40, \"label\", 6);\n    i0.ɵɵtext(41, \"ACCIONES\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(42, \"table\")(43, \"tr\");\n    i0.ɵɵtemplate(44, ReportesComponent_div_3_th_44_Template, 3, 0, \"th\", 8);\n    i0.ɵɵelementStart(45, \"th\", 9);\n    i0.ɵɵlistener(\"click\", function ReportesComponent_div_3_Template_th_click_45_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const r_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.resmoda(r_r1._id));\n    });\n    i0.ɵɵelementStart(46, \"button\", 10);\n    i0.ɵɵtext(47, \"Aprobar\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(48, \"th\", 9);\n    i0.ɵɵlistener(\"click\", function ReportesComponent_div_3_Template_th_click_48_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const r_r1 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.resmods(r_r1._id));\n    });\n    i0.ɵɵelementStart(49, \"button\", 11);\n    i0.ɵɵtext(50, \"Default\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(51, \"th\", 9);\n    i0.ɵɵlistener(\"click\", function ReportesComponent_div_3_Template_th_click_51_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const r_r1 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.resmodr(r_r1._id));\n    });\n    i0.ɵɵelementStart(52, \"button\", 12);\n    i0.ɵɵtext(53, \"Rechazar\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const r_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Nombre de evento: \", r_r1.namevent, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"Cedula: \", r_r1.user.ced, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Nombre: \", r_r1.user.name, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Email: \", r_r1.user.email, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Telefono: \", r_r1.user.telefono, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"DEPENDENCIA: \", r_r1.user.dependencia[0].nombre_unidad, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"Fecha de inicio: \", r_r1.fini, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Fecha de conclusion: \", r_r1.fend, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Sitio de evento: \", r_r1.sitio, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Estado: \", r_r1.state, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", r_r1.anexo);\n  }\n}\n\nexport class ReportesComponent {\n  constructor(reseserver) {\n    this.reseserver = reseserver;\n    this.dependencia = {\n      _id: '',\n      id_unidad: '',\n      nombre_unidad: '',\n      id_tipo_unidad: '',\n      tipo_unidad: ''\n    };\n    this.dependencias = [this.dependencia];\n    this.reservas = [{\n      _id: '',\n      fini: '',\n      fend: '',\n      namevent: '',\n      user: {\n        name: '',\n        ced: '',\n        roles: [],\n        dependencia: [this.dependencia],\n        email: '',\n        telefono: ''\n      },\n      sitio: '',\n      state: '',\n      anexo: ''\n    }];\n  }\n\n  ngOnInit() {\n    this.reseserver.getReservas().subscribe(res => {\n      this.reservas = res;\n      console.log(this.reservas);\n    });\n  }\n\n  resmoda(id) {\n    this.reseserver.UpdateStateA(id).subscribe(res => {\n      this.reservas = res;\n    });\n  }\n\n  resmods(id) {\n    this.reseserver.UpdateStateS(id).subscribe(res => {\n      this.reservas = res;\n    });\n  }\n\n  resmodr(id) {\n    this.reseserver.UpdateStateR(id).subscribe(res => {\n      this.reservas = res;\n    });\n  }\n\n  Down(id) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield (yield _this.reseserver.Download(id)).subscribe(res => {});\n    })();\n  }\n\n}\n\nReportesComponent.ɵfac = function ReportesComponent_Factory(t) {\n  return new (t || ReportesComponent)(i0.ɵɵdirectiveInject(i1.ReservasAdminService));\n};\n\nReportesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReportesComponent,\n  selectors: [[\"app-reportes\"]],\n  decls: 4,\n  vars: 1,\n  consts: [[1, \"continer\"], [1, \"row\"], [1, \"col-md-12\", \"mx-auto\"], [\"class\", \"card\", \"ngDefaultControl\", \"\", 4, \"ngFor\", \"ngForOf\"], [\"ngDefaultControl\", \"\", 1, \"card\"], [1, \"card-header\"], [\"for\", \"\"], [1, \"card-body\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [\"type\", \"reset\", 1, \"btn\", \"btn-success\"], [1, \"btn\", \"btn-secondary\"], [1, \"btn\", \"btn-danger\"], [1, \"btn\", \"btn-primary\"]],\n  template: function ReportesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵtemplate(3, ReportesComponent_div_3_Template, 54, 11, \"div\", 3);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.reservas);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZXBvcnRlcy5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ReportesComponent","constructor","reseserver","_id","id_unidad","nombre_unidad","id_tipo_unidad","tipo_unidad","dependencia","fini","fend","namevent","user","name","ced","roles","email","telefono","sitio","state","anexo","ngOnInit","getReservas","subscribe","res","reservas","console","log","resmoda","id","UpdateStateA","resmods","UpdateStateS","resmodr","UpdateStateR","Down","Download","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reportes\\reportes.component.html","C:\\Users\\Acer\\OneDrive\\Documentos\\Angular\\backend\\frontend\\src\\app\\components\\reportes\\reportes.component.ts"],"sourcesContent":["<div class=\"continer\">\n    <div class=\"row\">\n        <div class=\"col-md-12 mx-auto\">\n            <div class=\"card\" *ngFor=\"let r of reservas\"  ngDefaultControl>\n                <div class=\"card-header\">\n                    <label for=\"\">Nombre de evento: {{r.namevent}}</label>\n                </div>\n                <div class=\"card-body\">\n                    <div>\n                        <label for=\"\">USUARIO</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Cedula: {{r.user.ced}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Nombre: {{r.user.name}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Email: {{r.user.email}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Telefono: {{r.user.telefono}}</label>\n                    </div>\n                    <label for=\"\">DEPENDENCIA: {{r.user.dependencia[0].nombre_unidad}}</label>\n\n                    <hr>\n\n                    <div>\n                        <label for=\"\">RESERVA</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Fecha de inicio: {{r.fini}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Fecha de conclusion: {{r.fend}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Sitio de evento: {{r.sitio}}</label>\n                    </div>\n                    <div>\n                        <label for=\"\">Estado: {{r.state}}</label>\n                    </div>\n\n                    <hr>\n\n                    <div>\n                        <label for=\"\">ACCIONES</label>\n                    </div>\n\n                    <table>\n                        <tr>\n                            <th *ngIf=\"r.anexo\" (click)=\"Down(r.anexo)\">\n                                <button class=\"btn btn-primary\" >Descargar</button>\n                            </th>\n                            <th (click)=\"resmoda(r._id)\">\n                                <button type=\"reset\" class=\"btn btn-success\">Aprobar</button>\n                            </th>\n                            <th (click)=\"resmods(r._id)\">\n                                <button class=\"btn btn-secondary\">Default</button>\n                            </th>\n                            <th (click)=\"resmodr(r._id)\">\n                                <button class=\"btn btn-danger\">Rechazar</button>\n                            </th>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { TitleStrategy } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { ReservasAdminService } from 'src/app/services/reservas-admin.service';\n\n@Component({\n  selector: 'app-reportes',\n  templateUrl: './reportes.component.html',\n  styleUrls: ['./reportes.component.css']\n})\nexport class ReportesComponent implements OnInit {\n\n  dependencia={\n    _id:'',\n    id_unidad:'',\n    nombre_unidad:'',\n    id_tipo_unidad:'',\n    tipo_unidad:''\n  }\n  dependencias=[this.dependencia]\n  reservas=[{_id:'',\n            fini:'', \n            fend:'', \n            namevent:'', \n            user:{name:'',\n                  ced:'',\n                  roles:[],\n                  dependencia:[this.dependencia],\n                  email:'',\n                  telefono:''}, \n            sitio:'', \n            state:'', \n            anexo:''}]\n  \n\n  constructor(private reseserver:ReservasAdminService) { }\n\n  ngOnInit(): void {\n    this.reseserver.getReservas()\n    .subscribe(\n      res=>{\n        this.reservas=res;\n        console.log(this.reservas);\n      }\n    )\n  }\n\n  resmoda(id:string){\n    this.reseserver.UpdateStateA(id)\n    .subscribe(\n      res=>{\n      this.reservas=res\n    })\n  }\n  resmods(id:string){\n    this.reseserver.UpdateStateS(id)\n    .subscribe(\n      res=>{\n      this.reservas=res\n    })\n  }\n  resmodr(id:string){\n    this.reseserver.UpdateStateR(id)\n    .subscribe(\n      res=>{\n      this.reservas=res\n    })\n  }\n\n  async Down(id:string){\n    await (await this.reseserver.Download(id)).subscribe(res=>{\n      \n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}